<div class="bg-white rounded border border-gray-200 overflow-hidden">
  <!-- Articles du vendeur -->
  <div class="divide-y divide-gray-200">
    <div
      *ngFor="let item of group.items"
      class="p-3 md:p-4 hover:bg-gray-50 transition-colors"
    >
      <app-cart-item
        [item]="item"
        (itemChanged)="onItemChanged($event)"
        (itemRemoved)="onItemRemoved($event)"
        (itemAddedToFavorites)="onItemAddedToFavorites($event)"
      ></app-cart-item>
    </div>
  </div>

  <!-- Séparateur (identique aux autres) -->
  <div class="border-t border-gray-200"></div>

  <!-- Résumé vendeur -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 p-3 md:p-4 bg-gray-50">
    <!-- Info vendeur avec checkbox -->
    <div class="flex items-center gap-3">
      <!-- Checkbox select all -->
      <div class="flex-shrink-0">
        <input
          type="checkbox"
          [checked]="areAllItemsSelected()"
          (change)="toggleSelectAll()"
          class="w-4 h-4 text-primary-500 border-gray-300 rounded focus:ring-primary-500 cursor-pointer"
        />
      </div>

      <!-- Avatar -->
      <div class="w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold flex-shrink-0">
        {{ group.vendor.name.charAt(0).toUpperCase() }}
      </div>

      <!-- Nom et pays -->
      <div class="flex items-center gap-2 text-sm">
        <span class="font-medium text-gray-900">{{ '@' }}{{ group.vendor.name }}</span>
        <span class="text-xl">{{ group.vendor.countryFlag }}</span>
        <span class="text-gray-600">({{ group.vendor.country }})</span>
      </div>
    </div>

    <!-- Total et actions -->
    <div class="flex flex-col sm:flex-row items-start sm:items-center gap-3">
      <!-- Total -->
      <div class="text-sm">
        <span class="text-gray-600">Total:</span>
        <span class="ml-2 text-lg font-bold text-primary-500">
          {{ calculateTotal() }}{{ group.currency }}
        </span>
      </div>

      <!-- Boutons demande de remise -->
      <div class="flex items-center gap-2">
        <button
          *ngIf="!group.discountPending"
          (click)="requestDiscount()"
          class="px-4 py-2 text-sm font-medium text-primary-500 border border-primary-500 rounded hover:bg-primary-50 transition-colors whitespace-nowrap"
        >
          <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Demander remise
        </button>

        <button
          *ngIf="group.discountPending"
          disabled
          class="px-4 py-2 text-sm font-medium text-gray-500 bg-gray-100 rounded cursor-not-allowed whitespace-nowrap"
        >
          Demande en attente
        </button>
      </div>
    </div>
  </div>
</div>